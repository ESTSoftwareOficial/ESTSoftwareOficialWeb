<div class="h-16 px-4 py-4 flex md:hidden items-center justify-between bg-neutral-100 dark:bg-neutral-800 w-full fixed top-0 left-0 right-0 z-40">
  <a href="/" class="flex items-center space-x-2">
    <img src="/assets/logo.svg" alt="Logo" class="h-8 w-8 shrink-0">
    <span class="font-medium text-black dark:text-white">EST Software</span>
  </a>
  <button (click)="toggleMobileMenu()" class="p-2">
    <svg class="w-6 h-6 text-neutral-800 dark:text-neutral-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
    </svg>
  </button>
</div>

<div 
  *ngIf="isMobileMenuOpen()"
  class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden transition-opacity duration-300"
  (click)="closeMobileMenu()">
</div>

<div 
  class="fixed h-full w-full inset-0 bg-white dark:bg-neutral-900 p-10 z-50 flex flex-col justify-between md:hidden transition-transform duration-300 ease-in-out"
  [ngClass]="{
    '-translate-x-full': !isMobileMenuOpen(),
    'translate-x-0': isMobileMenuOpen()
  }">
  
  <button 
    (click)="closeMobileMenu()"
    class="absolute right-10 top-10 z-50 text-neutral-800 dark:text-neutral-200">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
    </svg>
  </button>

  <div class="flex flex-1 flex-col overflow-x-hidden overflow-y-auto">
   <a href="/" class="relative z-20 flex items-center space-x-2 py-1 text-sm font-normal text-black mb-8">
      <img src="/assets/logo.svg" alt="Logo" class="h-8 w-8 shrink-0">
      <span class="font-medium whitespace-pre text-black dark:text-white">EST Software</span>
    </a>

    <nav class="flex flex-col gap-2">
      <a 
        *ngFor="let item of menuItems"
        [routerLink]="item.route"
        (click)="closeMobileMenu()"
        routerLinkActive="bg-neutral-200 dark:bg-neutral-700"
        class="flex items-center gap-2 group/sidebar py-3 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors">
        <svg class="h-5 w-5 shrink-0 text-neutral-700 dark:text-neutral-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon" />
        </svg>
        <span class="text-neutral-700 dark:text-neutral-200 text-sm">{{ item.label }}</span>
      </a>
    </nav>
  </div>

  <div class="mt-auto space-y-2">
    <a href="#" class="flex items-center gap-2 py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors">
      <div class="h-7 w-7 shrink-0 rounded-full overflow-hidden" style="background-color: #22c55e;">
        <img src="/assets/ameth.png" class="h-full w-full object-cover" alt="Avatar Ameth">
      </div>
      <span class="text-neutral-700 dark:text-neutral-200 text-sm">ESTSoftware</span>
    </a>
    <button class="flex items-center gap-2 py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors w-full">
      <svg class="h-5 w-5 shrink-0 text-neutral-700 dark:text-neutral-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
      </svg>
      <span class="text-neutral-700 dark:text-neutral-200 text-sm">Cerrar Sesión</span>
    </button>
  </div>
</div>

<aside 
  class="hidden md:flex md:flex-col h-screen px-4 py-4 bg-neutral-100 dark:bg-neutral-800 fixed left-0 top-0 transition-all duration-300 ease-in-out z-30"
  [style.width]="isOpen() ? '300px' : '60px'"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()">
  
  <div class="flex flex-col justify-between h-full gap-10">
    <div class="flex flex-1 flex-col overflow-x-hidden overflow-y-auto">
      <a 
        href="/" 
        class="relative z-20 flex items-center space-x-2 py-1 text-sm font-normal text-black mb-8">
        <img src="/assets/logo.svg" alt="Logo" class="h-8 w-8 shrink-0">
        <span 
          class="font-medium whitespace-pre text-black dark:text-white transition-all duration-300 overflow-hidden"
          [ngClass]="{
            'opacity-0 w-0': !isOpen(),
            'opacity-100 w-auto': isOpen()
          }">
          EST Software
        </span>
      </a>

      <nav class="flex flex-col gap-2">
        <a 
          *ngFor="let item of menuItems"
          [routerLink]="item.route"
          routerLinkActive="bg-neutral-200 dark:bg-neutral-700"
          class="flex items-center justify-start gap-2 group/sidebar py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all">
          <svg class="h-5 w-5 shrink-0 text-neutral-700 dark:text-neutral-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="item.icon" />
          </svg>
          <span 
            class="text-neutral-700 dark:text-neutral-200 text-sm group-hover/sidebar:translate-x-1 transition-all duration-150 whitespace-pre overflow-hidden"
            [ngClass]="{
              'opacity-0 w-0': !isOpen(),
              'opacity-100 w-auto': isOpen()
            }">
            {{ item.label }}
          </span>
        </a>
      </nav>
    </div>

    <div>
      <a 
        href="#" 
        class="flex items-center justify-start gap-2 group/sidebar py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all">
        <div class="h-7 w-7 shrink-0 rounded-full overflow-hidden" style="background-color: #22c55e;">
          <img 
            src="/assets/ameth.png" 
            class="h-full w-full object-cover" 
            alt="Avatar Ameth">
        </div>
        <span 
          class="text-neutral-700 dark:text-neutral-200 text-sm group-hover/sidebar:translate-x-1 transition-all duration-150 whitespace-pre overflow-hidden"
          [ngClass]="{
            'opacity-0 w-0': !isOpen(),
            'opacity-100 w-auto': isOpen()
          }">
          Ameth Toledo
        </span>
      </a>

      <button 
        class="flex items-center justify-start gap-2 group/sidebar py-2 px-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all w-full mt-2">
        <svg class="h-5 w-5 shrink-0 text-neutral-700 dark:text-neutral-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
        </svg>
        <span 
          class="text-neutral-700 dark:text-neutral-200 text-sm group-hover/sidebar:translate-x-1 transition-all duration-150 whitespace-pre overflow-hidden"
          [ngClass]="{
            'opacity-0 w-0': !isOpen(),
            'opacity-100 w-auto': isOpen()
          }">
          Cerrar Sesión
        </span>
      </button>
    </div>
  </div>
</aside>